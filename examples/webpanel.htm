<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  
  <style>
    body {
      padding-top: 60px;
      padding-bottom: 60px;
      background-color: #f8f8f8;
    }

    .ts-row {
      padding-top: 10px;
      padding-bottom: 10px;
      background-color: #f8f8f8;
    }

    .ts-row-empty {
      padding-top: 10px;
      padding-bottom: 10px;
      background-color: #f8f8f8;
    }

    .ts-btn-90 {
      width: 90px;
    }

    .ts-btn-full {
      width: 100%;
    }  
  </style>
  
</head>
<body>
  
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="row text-center">
      <div class="col-xs-4">
      <button type="button" id="menu-joint" class="btn btn-warning navbar-btn btn-lg ts-btn-full ts-menu">JOG</button>
      </div>
      <div class="col-xs-4">
      <button type="button" id="menu-poses" class="btn btn-success navbar-btn btn-lg ts-btn-full ts-menu">POSE</button>
      </div>
      <div class="col-xs-4">
      <button type="button" id="menu-tcp" class="btn btn-primary navbar-btn btn-lg ts-btn-full ts-menu">CART</button>
      </div>
      </div>
    </div>
  </nav>

  <div id="joint" class="container">

    <div class="row ts-row-empty"></div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="j1m" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J1-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="joint1">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j1p" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J1+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="j2m" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J2-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="joint2">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j2p" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J2+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="j3m" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J3-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="joint3">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j3p" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J3+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="j4m" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J4-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="joint4">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j4p" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J4+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="j5m" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J5-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="joint5">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j5p" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J5+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="j6m" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J6-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="joint6">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j6p" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J6+</button>
      </div>
    </div>

  </div>

  <div id="tcp" class="container">

    <div class="row ts-row-empty"></div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="wlmx" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">X-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wlx">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wlpx" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">X+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="wlmy" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">Y-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wly">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wlpy" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">Y+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="wlmz" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">Z-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wlz">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wlpz" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">Z+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="wrmx" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">W-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="trx">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wrpx" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">W+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="wrmy" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">P-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="try">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wrpy" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">P+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="wrmz" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">R-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="trz">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wrpz" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">R+</button>
      </div>
    </div>

  </div>

  <div id="poses" class="container">

    <div class="row ts-row-empty"></div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <h4 class="joint1">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="pickup" class="btn btn-success btn-lg ts-btn-90">Pickup</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wlx">load...</h4>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <h4 class="joint2">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="zero" class="btn btn-success btn-lg ts-btn-90">Zero</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wly">load...</h4>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <h4 class="joint3">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="place" class="btn btn-success btn-lg ts-btn-90">Place</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wlz">load...</h4>
      </div>  
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <h4 class="joint4">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="coord" class="btn btn-success btn-lg ts-btn-90">Coord</button>
      </div>
      <div class="col-xs-4">
        <h4 class="trx">load...</h4>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <h4 class="joint5">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="show" class="btn btn-success btn-lg ts-btn-90">Show</button>
      </div>
      <div class="col-xs-4">
        <h4 class="try">load...</h4>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <h4 class="joint6">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="touch" class="btn btn-success btn-lg ts-btn-90">Touch</button>
      </div>
      <div class="col-xs-4">
        <h4 class="trz">load...</h4>
      </div>
    </div>

  </div>

  <div id="output"></div>

  <nav class="navbar navbar-default navbar-fixed-bottom">
    <div class="container">
    <div class="row text-center">
      <div class="col-xs-12">
        <button type="button" id="abort" class="btn btn-danger navbar-btn btn-lg ts-btn-full">Abort</button>
      </div>
    </div>
    </div>
  </nav>

  <script>

    $(document).ready(function() {  

      var refresh
      var setInt = 50
      var enButVar
      var setTime = 500
    
      $('#joint').show()
      $('#tcp').hide()
      $('#poses').hide()

      $('#menu-joint').click(function() {
        $('#joint').show()
        $('#tcp').hide()
        $('#poses').hide()
      })  

      $('#menu-tcp').click(function() {
        $('#joint').hide()
        $('#tcp').show()
        $('#poses').hide()
      })  

      $('#menu-poses').click(function() {
        $('#joint').hide()
        $('#tcp').hide()
        $('#poses').show()
      })      

      getposj()

      function getposj () {
        $.getJSON("/KAREL/webmonitor", function(data) {
          $('.joint1').html(Math.round(data.joint[0]) + '&#176;')
          $('.joint2').html(Math.round(data.joint[1]) + '&#176;')
          $('.joint3').html(Math.round(data.joint[2]) + '&#176;')
          $('.joint4').html(Math.round(data.joint[3]) + '&#176;')
          $('.joint5').html(Math.round(data.joint[4]) + '&#176;')
          $('.joint6').html(Math.round(data.joint[5]) + '&#176;')
          $('.wlx').html(Math.round(data.pose[0]) + ' mm')
          $('.wly').html(Math.round(data.pose[1]) + ' mm')
          $('.wlz').html(Math.round(data.pose[2]) + ' mm')
          $('.trx').html(Math.round(data.pose[3]) + '&#176;')
          $('.try').html(Math.round(data.pose[4]) + '&#176;')
          $('.trz').html(Math.round(data.pose[5]) + '&#176;')
          setTimeout(getposj(), 100)
        })
      }


      // Abort motion

      $('#abort').click(function() {
        console.log('ABORT motion')
        $.ajax({
          type: 'GET',
          url: '/KAREL/webabort',
          cache: false,
          success: function() {
            console.log('Send ABORT is success')
          }
        })
      })
      
      
      // Keep motion
      
      function webkeep() {
        console.log('KEEP motion')
        $.ajax({
          type: 'GET',
          url: '/KAREL/webkeep',
          cache: false,
          success: function() {
            console.log('Send KEEP is success')
          }
        })  
      }    

      
      // Stop motion
      
      function webstop() {
        console.log('STOP(99) motion')
        $.ajax({
          type: 'GET',
          url: '/KAREL/webstop',
          cache: false,
          success: function() {
            console.log('Send STOP(99) is success')
          }
        })
      }

      
      // Enable buttons after motion
      
      function enBut() {
        $(".btn").removeAttr("disabled")
      }


      // Jogging

      $('#j1m').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=1&getstep=-1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#j1p').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=1&getstep=1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })
 
      $('#j2m').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=2&getstep=-1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j2p').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=2&getstep=1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j3m').on('pointerdown', function() {
        clearTimeout(enButVar)      
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=3&getstep=-1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j3p').on('pointerdown', function() {
        clearTimeout(enButVar)      
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=3&getstep=1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })  

      $('#j4m').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false) 
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=4&getstep=-1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j4p').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=4&getstep=1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j5m').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=5&getstep=-1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j5p').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=5&getstep=1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j6m').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)  
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=6&getstep=-1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j6p').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false) 
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=6&getstep=1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 


      // Move to linear
      
      $('#wlmx').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=l&getcpos=1&getstep=-3',
          cache: false,
          success: function() {
            console.log('')
          }
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wlpx').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=l&getcpos=1&getstep=3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wlmy').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=l&getcpos=2&getstep=-3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wlpy').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=l&getcpos=2&getstep=3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wlmz').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=l&getcpos=3&getstep=-3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wlpz').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=l&getcpos=3&getstep=3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })


      // Rotate the TCP

      $('#wrmx').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=r&getcpos=4&getstep=-3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wrpx').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=r&getcpos=4&getstep=3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wrmy').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=r&getcpos=5&getstep=-3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wrpy').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=r&getcpos=5&getstep=3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wrmz').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=r&getcpos=6&getstep=-3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wrpz').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=r&getcpos=6&getstep=3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })


      //Move to predefined pose
      
      $('#pickup').click(function() {
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=p&j1=-45&j2=45&j3=90&j4=0&j5=0&j6=0',
          cache: false,
          success: function() {}
        })
      })

      $('#zero').click(function() {
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=p&j1=0&j2=0&j3=0&j4=0&j5=0&j6=0',
          cache: false,
          success: function() {}
        })
      })

      $('#place').click(function() {
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=p&j1=0&j2=45&j3=135&j4=0&j5=-45&j6=0',
          cache: false,
          success: function() {}
        })
      })

      $('#coord').click(function() {
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=p&j1=0&j2=30&j3=90&j4=0&j5=-90&j6=0',
          cache: false,
          success: function() {}
        })
      })

      $('#show').click(function() {
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=p&j1=90&j2=0&j3=90&j4=0&j5=-90&j6=-90',
          cache: false,
          success: function() {}
        })
      })

      $('#touch').click(function() {
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=p&j1=90&j2=60&j3=30&j4=0&j5=60&j6=-90',
          cache: false,
          success: function() {}
        })
      })

    })

  </script>

</body>
</html>