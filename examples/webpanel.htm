<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  
  <style>
    body {
      background-color: #f8f8f8;
    }
    .ts-row {
      padding-top: 10px;
      padding-bottom: 10px;
    }
    .ts-btn-90 {
      width: 90px;
    }
    .ts-btn-full {
      width: 100%;
    }  
  </style>
  
</head>
<body>

  <div class="container">
    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="menu-jog" class="btn btn-warning navbar-btn btn-lg ts-btn-full ts-menu">JOG</button>
      </div>
      <div class="col-xs-4">
        <button type="button" id="menu-pose" class="btn btn-success navbar-btn btn-lg ts-btn-full ts-menu">POSE</button>
      </div>
      <div class="col-xs-4">
        <button type="button" id="menu-cart" class="btn btn-primary navbar-btn btn-lg ts-btn-full ts-menu">CART</button>
      </div>
    </div>
  </div>

  <div id="jog" class="container">

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="j1m" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J1-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="j1">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j1p" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J1+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="j2m" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J2-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="j2">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j2p" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J2+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="j3m" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J3-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="j3">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j3p" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J3+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="j4m" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J4-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="j4">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j4p" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J4+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="j5m" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J5-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="j5">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j5p" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J5+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="j6m" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J6-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="j6">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j6p" class="btn btn-warning btn-lg ts-btn-90" touch-action="none">J6+</button>
      </div>
    </div>

  </div>

  <div id="pose" class="container">

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <h4 class="j1">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="pickup" class="btn btn-success btn-lg ts-btn-90">Pickup</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wx">load...</h4>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <h4 class="j2">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="zero" class="btn btn-success btn-lg ts-btn-90">Zero</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wy">load...</h4>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <h4 class="j3">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="place" class="btn btn-success btn-lg ts-btn-90">Place</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wz">load...</h4>
      </div>  
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <h4 class="j4">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="coord" class="btn btn-success btn-lg ts-btn-90">Coord</button>
      </div>
      <div class="col-xs-4">
        <h4 class="ww">load...</h4>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <h4 class="j5">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="show" class="btn btn-success btn-lg ts-btn-90">Show</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wp">load...</h4>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <h4 class="j6">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="touch" class="btn btn-success btn-lg ts-btn-90">Touch</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wr">load...</h4>
      </div>
    </div>

  </div>

  <div id="cart" class="container">

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="wmx" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">X-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wx">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wpx" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">X+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="wmy" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">Y-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wy">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wpy" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">Y+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="wmz" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">Z-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wz">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wpz" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">Z+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="wmw" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">W-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="ww">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wpw" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">W+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="wmp" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">P-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wp">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wpp" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">P+</button>
      </div>
    </div>

    <div class="row text-center ts-row">
      <div class="col-xs-4">
        <button type="button" id="wmr" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">R-</button>
      </div>
      <div class="col-xs-4">
        <h4 class="wr">load...</h4>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wpr" class="btn btn-primary btn-lg ts-btn-90" touch-action="none">R+</button>
      </div>
    </div>

  </div>

  <div class="container">
    <div class="row text-center ts-row">
      <div class="col-xs-6">
	    <button type="button" id="abort" class="btn btn-danger navbar-btn btn-lg ts-btn-full">Abort</button>
      </div>
      <div class="col-xs-6">
	    <button type="button" id="start" class="btn btn-success navbar-btn btn-lg ts-btn-full">Start</button>
      </div>	  
    </div>
  </div>

  <footer class="text-center">
    <small>&copy; Copyright 2017, &#211;buda University - <a href="http://irob.uni-obuda.hu">iROB</a></small>
  </footer>
  
  <script>

    $(document).ready(function() {  

      var refresh
      var setInt = 50
      var enButVar
      var setTime = 500
    
      $('#jog').show()
      $('#cart').hide()
      $('#pose').hide()

      $('#menu-jog').click(function() {
        $('#jog').show()
        $('#cart').hide()
        $('#pose').hide()
      })

      $('#menu-pose').click(function() {
        $('#jog').hide()
        $('#cart').hide()
        $('#pose').show()
      })      

      $('#menu-cart').click(function() {
        $('#jog').hide()
        $('#cart').show()
        $('#pose').hide()
      })

      getposj()

      function getposj () {
        $.getJSON("/KAREL/webmonitor", function(data) {
          $('.j1').html(Math.round(data.joint[0]) + '&#176;')
          $('.j2').html(Math.round(data.joint[1]) + '&#176;')
          $('.j3').html(Math.round(data.joint[2]) + '&#176;')
          $('.j4').html(Math.round(data.joint[3]) + '&#176;')
          $('.j5').html(Math.round(data.joint[4]) + '&#176;')
          $('.j6').html(Math.round(data.joint[5]) + '&#176;')
          $('.wx').html(Math.round(data.pose[0]) + ' mm')
          $('.wy').html(Math.round(data.pose[1]) + ' mm')
          $('.wz').html(Math.round(data.pose[2]) + ' mm')
          $('.ww').html(Math.round(data.pose[3]) + '&#176;')
          $('.wp').html(Math.round(data.pose[4]) + '&#176;')
          $('.wr').html(Math.round(data.pose[5]) + '&#176;')
          setTimeout(getposj(), 100)
        })
      }


      // Start motion

      $('#start').click(function() {
        console.log('Start motion')
        $.ajax({
          type: 'GET',
          url: '/KAREL/webstart',
          cache: false,
          success: function() {
            console.log('Send START is success')
          }
        })
      })	  
	  
      // Abort motion

      $('#abort').click(function() {
        console.log('ABORT motion')
        $.ajax({
          type: 'GET',
          url: '/KAREL/webabort',
          cache: false,
          success: function() {
            console.log('Send ABORT is success')
          }
        })
      })
      
      
      // Keep motion
      
      function webkeep() {
        console.log('KEEP motion')
        $.ajax({
          type: 'GET',
          url: '/KAREL/webkeep',
          cache: false,
          success: function() {
            console.log('Send KEEP is success')
          }
        })  
      }    

      
      // Stop motion
      
      function webstop() {
        console.log('STOP(99) motion')
        $.ajax({
          type: 'GET',
          url: '/KAREL/webstop',
          cache: false,
          success: function() {
            console.log('Send STOP(99) is success')
          }
        })
      }

      
      // Enable buttons after motion
      
      function enBut() {
        $(".btn").removeAttr("disabled")
      }


      // Jogging

      $('#j1m').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=1&getstep=-1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#j1p').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=1&getstep=1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })
 
      $('#j2m').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=2&getstep=-1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j2p').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=2&getstep=1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j3m').on('pointerdown', function() {
        clearTimeout(enButVar)      
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=3&getstep=-1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j3p').on('pointerdown', function() {
        clearTimeout(enButVar)      
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=3&getstep=1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })  

      $('#j4m').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false) 
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=4&getstep=-1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j4p').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=4&getstep=1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j5m').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=5&getstep=-1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j5p').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=5&getstep=1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j6m').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)  
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=6&getstep=-1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j6p').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false) 
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=j&getcpos=6&getstep=1',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 


      // Move to linear
      
      $('#wmx').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=l&getcpos=1&getstep=-3',
          cache: false,
          success: function() {
            console.log('')
          }
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wpx').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=l&getcpos=1&getstep=3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wmy').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=l&getcpos=2&getstep=-3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wpy').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=l&getcpos=2&getstep=3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wmz').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=l&getcpos=3&getstep=-3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wpz').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=l&getcpos=3&getstep=3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })


      // Rotate the TCP

      $('#wmw').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=r&getcpos=4&getstep=-3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wpw').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=r&getcpos=4&getstep=3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wmp').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=r&getcpos=5&getstep=-3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wpp').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=r&getcpos=5&getstep=3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wmr').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=r&getcpos=6&getstep=-3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wpr').on('pointerdown', function() {
        clearTimeout(enButVar)
        $(".btn").not(this).prop("disabled", true)
        $("#abort").prop("disabled", false)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=r&getcpos=6&getstep=3',
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('pointerup', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })


      //Move to predefined pose
      
      $('#pickup').click(function() {
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=p&j1=-45&j2=45&j3=90&j4=0&j5=0&j6=0',
          cache: false,
          success: function() {}
        })
      })

      $('#zero').click(function() {
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=p&j1=0&j2=0&j3=0&j4=0&j5=0&j6=0',
          cache: false,
          success: function() {}
        })
      })

      $('#place').click(function() {
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=p&j1=0&j2=45&j3=135&j4=0&j5=-45&j6=0',
          cache: false,
          success: function() {}
        })
      })

      $('#coord').click(function() {
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=p&j1=0&j2=30&j3=90&j4=0&j5=-90&j6=0',
          cache: false,
          success: function() {}
        })
      })

      $('#show').click(function() {
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=p&j1=90&j2=0&j3=90&j4=0&j5=-90&j6=-90',
          cache: false,
          success: function() {}
        })
      })

      $('#touch').click(function() {
        $.ajax({
          type: 'GET',
          url: '/KAREL/webcontrol?getstart=p&j1=90&j2=60&j3=30&j4=0&j5=60&j6=-90',
          cache: false,
          success: function() {}
        })
      })

    })

  </script>

</body>
</html>