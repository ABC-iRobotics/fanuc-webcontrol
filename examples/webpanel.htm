<!DOCTYPE html>
<html>
<head>
  <title>WEBPANEL</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Oswald:300" rel="stylesheet">
  <style>
    body {
      background-color: #f8f8f8;
    }
    .ts-row-3px {
      padding-top: 3px;
    }
    .ts-row-5px {
      padding-top: 5px;
    }
    .ts-row-10px {
      padding-top: 10px;
    }    
    .ts-row-20px {
      padding-top: 20px;
    }    
    .ts-btn-90 {
      width: 90px;
    }
    .ts-btn-full {
      width: 100%;
    }
    .coord {
      color: #428bca;
      font-family: 'Oswald', sans-serif;
    }
    p {
      padding-top: 2px;
      font-size: 17px;
      padding-bottom: 0;
    }
    .screen-data {
      font-family: 'Oswald', sans-serif;
    }
  </style>
</head>
<body>

  <div id="info-controller" class="container">
    <div class="ts-row-10px"></div>  
    <div class="row">
      <div class="col-xs-4 text-center">
        <p id="status" class="well well-sm screen-data">load...</p>
      </div>
      <div class="col-xs-8 text-center">
        <p id="message" class="well well-sm screen-data">load...</p>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12 text-center">
        <p id="error" class="well well-sm screen-data">load...</p>
      </div>
    </div>
  </div>

  <div id="info-jog" class="container">
    <div class="ts-row-5px"></div>
    <div class="row">
      <div class="col-xs-4 text-center">
        <p class="j1 coord well well-sm">load...</p>
      </div>
      <div class="col-xs-4 text-center">
        <p class="j2 coord well well-sm">load...</p>
      </div>
      <div class="col-xs-4 text-center">
        <p class="j3 coord well well-sm">load...</p>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-4 text-center">
        <p class="j4 coord well well-sm">load...</p>
      </div>
      <div class="col-xs-4 text-center">
        <p class="j5 coord well well-sm">load...</p>
      </div>
      <div class="col-xs-4 text-center">
        <p class="j6 coord well well-sm">load...</p>
      </div>
    </div>
  </div>

  <div id="info-cart" class="container">
    <div class="row">
      <div class="col-xs-4 text-center">
        <p class="wx coord well well-sm">load...</span></p>
      </div>
      <div class="col-xs-4 text-center">
        <p class="wy coord well well-sm">load...</span></p>
      </div>
      <div class="col-xs-4 text-center">
        <p class="wz coord well well-sm">load...</span></p>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-4 text-center">
        <p class="ww coord well well-sm">load...</p>
      </div>
      <div class="col-xs-4 text-center">
        <p class="wp coord well well-sm">load...</p>
      </div>
      <div class="col-xs-4 text-center">
        <p class="wr coord well well-sm">load...</p>
      </div>
    </div>
  </div>

  <div id="webprogram-run" class="container">
    <div class="ts-row-10px"></div>
    <div class="row text-center">
      <div class="col-sm-6 col-sm-offset-3 col-xs-12" id="runTask">
        <select class="form-control" id="selectTask"></select>
      </div>
    </div>
    <div class="ts-row-10px"></div>
    <div class="ts-row-10px"></div>
    <div class="ts-row-10px"></div>
    <div class="row text-center">
      <div class="col-sm-2 col-sm-offset-3 col-xs-4">
        <button type="button" id="webprogram-start" class="btn btn-info ts-btn-full">START</button>
      </div>
      <div class="col-sm-2 col-xs-4">
        <button type="button" class="btn ts-btn-full reset">RESET</button>
      </div>
      <div class="col-sm-2 col-xs-4">
        <button type="button" id="webmotion-join" class="btn btn-default ts-btn-full">JOIN</button>
      </div>
    </div>
    <div class="ts-row-10px"></div>
  </div>

  <div id="webprogram-control" class="container">   
    <div class="ts-row-20px"></div>   
    <div class="row text-center">
      <div class="col-xs-12 text-center">
        <button type="button" class="btn btn-danger ts-btn-full abort">ABORT / STOP</button>
      </div>   
    </div>
    <div class="ts-row-10px"></div> 
  </div>

  <div id="webmotion-menu" class="container">
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="webmotion-menu-jog" class="btn btn-warning ts-btn-full">JOG</button>
      </div>
      <div class="col-xs-4">
        <button type="button" id="webmotion-menu-cart" class="btn btn-primary ts-btn-full">CART</button>
      </div>
      <div class="col-xs-4">
        <button type="button" id="webmotion-menu-set" class="btn btn-success ts-btn-full">SET</button>
      </div>
    </div>
    <div class="ts-row-20px"></div>
    <div class="ts-row-5px"></div>
  </div>

  <div id="webmotion-jog" class="container">
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="j1m" class="btn btn-warning ts-btn-90">J1-</button>
      </div>
      <div class="col-xs-4">
        <p class="j1 coord">load...</p>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j1p" class="btn btn-warning ts-btn-90">J1+</button>
      </div>
    </div>
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="j2m" class="btn btn-warning ts-btn-90">J2-</button>
      </div>
      <div class="col-xs-4">
        <p class="j2 coord">load...</p>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j2p" class="btn btn-warning ts-btn-90">J2+</button>
      </div>
    </div>
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="j3m" class="btn btn-warning ts-btn-90">J3-</button>
      </div>
      <div class="col-xs-4">
        <p class="j3 coord">load...</p>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j3p" class="btn btn-warning ts-btn-90">J3+</button>
      </div>
    </div>
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="j4m" class="btn btn-warning ts-btn-90">J4-</button>
      </div>
      <div class="col-xs-4">
        <p class="j4 coord">load...</p>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j4p" class="btn btn-warning ts-btn-90">J4+</button>
      </div>
    </div>
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="j5m" class="btn btn-warning ts-btn-90">J5-</button>
      </div>
      <div class="col-xs-4">
        <p class="j5 coord">load...</p>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j5p" class="btn btn-warning ts-btn-90">J5+</button>
      </div>
    </div>
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="j6m" class="btn btn-warning ts-btn-90">J6-</button>
      </div>
      <div class="col-xs-4">
        <p class="j6 coord">load...</p>
      </div>
      <div class="col-xs-4">
        <button type="button" id="j6p" class="btn btn-warning ts-btn-90">J6+</button>
      </div>
    </div>
    <div class="ts-row-5px"></div>
  </div>

  <div id="webmotion-cart" class="container">
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="wmx" class="btn btn-primary ts-btn-90">X-</button>
      </div>
      <div class="col-xs-4">
        <p class="wx coord">load...</p>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wpx" class="btn btn-primary ts-btn-90">X+</button>
      </div>
    </div>
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="wmy" class="btn btn-primary ts-btn-90">Y-</button>
      </div>
      <div class="col-xs-4">
        <p class="wy coord">load...</p>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wpy" class="btn btn-primary ts-btn-90">Y+</button>
      </div>
    </div>
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="wmz" class="btn btn-primary ts-btn-90">Z-</button>
      </div>
      <div class="col-xs-4">
        <p class="wz coord">load...</p>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wpz" class="btn btn-primary ts-btn-90">Z+</button>
      </div>
    </div>
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="wmw" class="btn btn-primary ts-btn-90">W-</button>
      </div>
      <div class="col-xs-4">
        <p class="ww coord">load...</p>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wpw" class="btn btn-primary ts-btn-90">W+</button>
      </div>
    </div>
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="wmp" class="btn btn-primary ts-btn-90">P-</button>
      </div>
      <div class="col-xs-4">
        <p class="wp coord">load...</p>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wpp" class="btn btn-primary ts-btn-90">P+</button>
      </div>
    </div>
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="wmr" class="btn btn-primary ts-btn-90">R-</button>
      </div>
      <div class="col-xs-4">
        <p class="wr coord">load...</p>
      </div>
      <div class="col-xs-4">
        <button type="button" id="wpr" class="btn btn-primary ts-btn-90">R+</button>
      </div>
    </div>
    <div class="ts-row-5px"></div>
  </div>

  <div id="webmotion-set" class="container">
    <div class="ts-row-10px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <p id="xMax" class="coord">Load...</p>
      </div>
      <div class="col-xs-4">
        <p id="yMax" class="coord">Load...</p>
      </div>
      <div class="col-xs-4">
        <p id="zMax" class="coord">Load...</p>
      </div>
    </div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="xMaxCh" class="btn btn-default ts-btn-90" data-toggle="modal" data-target="#xMaxSet">X max</button>
      </div>
      <div class="col-xs-4">
        <button type="button" id="yMaxCh" class="btn btn-default ts-btn-90" data-toggle="modal" data-target="#yMaxSet">Y max</button>
      </div>
      <div class="col-xs-4">
        <button type="button" id="zMaxCh" class="btn btn-default ts-btn-90" data-toggle="modal" data-target="#zMaxSet">Z max</button>
      </div>
    </div>
    <div class="ts-row-10px"></div>
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <p id="xMin" class="coord">Load...</p>
      </div>
      <div class="col-xs-4">
        <p id="yMin" class="coord">Load...</p>
      </div>
      <div class="col-xs-4">
        <p id="zMin" class="coord">Load...</p>
      </div> 
    </div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="xMinCh" class="btn btn-default ts-btn-90" data-toggle="modal" data-target="#xMinSet">X min</button>
      </div>
      <div class="col-xs-4">
        <button type="button" id="yMinCh" class="btn btn-default ts-btn-90" data-toggle="modal" data-target="#yMinSet">Y min</button>
      </div>
      <div class="col-xs-4">
        <button type="button" id="zMinCh" class="btn btn-default ts-btn-90" data-toggle="modal" data-target="#zMinSet">Z min</button>
      </div>
    </div>
    <div class="ts-row-3px"></div>    
    <div class="ts-row-10px"></div>
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="pickup" class="btn btn-success ts-btn-90">Pickup</button>
      </div>
      <div class="col-xs-4">
        <button type="button" id="zero" class="btn btn-success ts-btn-90">Zero</button>
      </div>
      <div class="col-xs-4">
        <button type="button" id="place" class="btn btn-success ts-btn-90">Place</button>
      </div>
    </div>
    <div class="ts-row-10px"></div>
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4">
        <button type="button" id="coord" class="btn btn-success ts-btn-90">Coord</button>
      </div>
      <div class="col-xs-4">
        <button type="button" id="show" class="btn btn-success ts-btn-90">Show</button>
      </div>
      <div class="col-xs-4">
        <button type="button" id="touch" class="btn btn-success ts-btn-90">Touch</button>
      </div>
    </div>
    <div class="ts-row-10px"></div>
  </div>

  <div id="webmotion-control" class="container">
    <div class="ts-row-20px"></div>
    <div class="row text-center">
      <div class="col-xs-4 text-center">
        <button type="button" class="btn ts-btn-full reset">RESET</button>
      </div>
      <div class="col-xs-4 text-center">
        <button type="button" class="btn btn-danger ts-btn-full abort">ABORT</button>
      </div>
      <div class="col-xs-4 text-center">
        <button type="button" id="webmotion-restart" class="btn btn-info ts-btn-full">START</button>
      </div>
    </div>
    <div class="ts-row-10px"></div>
  </div>

  <footer class="text-center">
    <small>&copy; Copyright 2017, &#211;buda University - <a href="http://irob.uni-obuda.hu">iROB</a></small>
  </footer>

  <!-- Modals -->

  <div id="xMaxSet" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <p class="modal-title">Enter the new value</p>
          <span>(from -9999 to 9999)<span>
        </div>
        <div class="modal-body">
          <p>If you leave it empty the axis limit is maximized</p>
          <p>X max: <input type="number" id="xMaxNew" min="-9999" max="9999"></p>
          <p class="limitWarning" style="color:red">The limit is need to be between -9999 and 9999</p>
        </div>
        <div class="modal-footer">
          <button type="button" id="xMaxSave" class="btn btn-default">Save</button>
          <button type="button" class="btn btn-default limit-cancel" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div id="yMaxSet" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <p class="modal-title">Enter the new value</p>
          <span>(from -9999 to 9999)<span>
        </div>
        <div class="modal-body">
          <p>If you leave it empty the axis limit is maximized</p>
          <p>Y max: <input type="number" id="yMaxNew" min="-9999" max="9999"></p>
          <p class="limitWarning" style="color:red">The limit is need to be between -9999 and 9999</p>
        </div>
        <div class="modal-footer">
          <button type="button" id="yMaxSave" class="btn btn-default">Save</button>
          <button type="button" class="btn btn-default limit-cancel" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div id="zMaxSet" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <p class="modal-title">Enter the new value</p>
          <span>(from -9999 to 9999)<span>
        </div>
        <div class="modal-body">
          <p>If you leave it empty the axis limit is maximized</p>
          <p>Z max: <input type="number" id="zMaxNew" min="-9999" max="9999"></p>
          <p class="limitWarning" style="color:red">The limit is need to be between -9999 and 9999</p>
        </div>
        <div class="modal-footer">
          <button type="button" id="zMaxSave" class="btn btn-default">Save</button>
          <button type="button" class="btn btn-default limit-cancel" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div id="xMinSet" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <p class="modal-title">Enter the new value</p>
          <span>(from -9999 to 9999)<span>
        </div>
        <div class="modal-body">
          <p>If you leave it empty the axis limit is maximized</p>
          <p>X min: <input type="number" id="xMinNew" min="-9999" max="9999"></p>
          <p class="limitWarning" style="color:red">The limit is need to be between -9999 and 9999</p>
        </div>
        <div class="modal-footer">
          <button type="button" id="xMinSave" class="btn btn-default">Save</button>
          <button type="button" class="btn btn-default limit-cancel" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div id="yMinSet" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <p class="modal-title">Enter the new value</p>
          <span>(from -9999 to 9999)<span>
        </div>
        <div class="modal-body">
          <p>If you leave it empty the axis limit is maximized</p>
          <p>Y min: <input type="number" id="yMinNew" min="-9999" max="9999"></p>
          <p class="limitWarning" style="color:red">The limit is need to be between -9999 and 9999</p>
        </div>
        <div class="modal-footer">
          <button type="button" id="yMinSave" class="btn btn-default">Save</button>
          <button type="button" class="btn btn-default limit-cancel" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div id="zMinSet" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <p class="modal-title">Enter the new value</p>
          <span>(from -9999 to 9999)<span>
        </div>
        <div class="modal-body">
          <p>If you leave it empty the axis limit is maximized</p>
          <p>Z min: <input type="number" id="zMinNew" min="-9999" max="9999"></p>
          <p class="limitWarning" style="color:red">The limit is need to be between -9999 and 9999</p>
        </div>
        <div class="modal-footer">
          <button type="button" id="zMinSave" class="btn btn-default">Save</button>
          <button type="button" class="btn btn-default limit-cancel" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script>

    $(document).ready(function() {  

      var refresh
      var setInt = 50
      var enButVar
      var setTime = 100
      var axisLimit = 9999
    
      $('#info-controller').show()
      $('#info-jog').show()
      $('#info-cart').show()
      $('#webprogram-run').show()
      $('#webprogram-control').show()
      $('#webmotion-menu').hide()
      $('#webmotion-jog').hide()
      $('#webmotion-cart').hide()
      $('#webmotion-set').hide()
      $('#webmotion-control').hide()

      $('#webmotion-menu-jog').click(function() {
        $('#webmotion-jog').show()
        $('#webmotion-cart').hide()
        $('#webmotion-set').hide()
      })     

      $('#webmotion-menu-cart').click(function() {
        $('#webmotion-jog').hide()
        $('#webmotion-cart').show()
        $('#webmotion-set').hide()
      })

      $('#webmotion-menu-set').click(function() {
        $('#webmotion-jog').hide()
        $('#webmotion-cart').hide()
        $('#webmotion-set').show()
      })

      $.getJSON("/KAREL/webprogram", function(data) {

        $('#selectTask').html('')

        var notRelevant = '######'      

        for ( var i = 0; i < data.progs.length; i++ ) {
          if ( data.progs[i].indexOf(" TP") == -1 ) {
            data.progs[i] = notRelevant
          }
        }

        progList = jQuery.grep(data.progs, function(value) {
          return value != notRelevant;
        })

        for ( var i = 2; i < progList.length; i++ ) {
          //creates option tag and appends to select if parent div has id dropdown
          jQuery('<option/>', {value: progList[i], html: progList[i]}).appendTo('#runTask select')
          if ( progList[i].indexOf("WEBMOTION") >= 0 ) {
            $('#selectTask').val(progList[i])
          }
        }

      })

      getposj()

      function getposj () {

        $.getJSON("/KAREL/webmonitor", function(data) {

          // Show the current robot status

          if (data.status[0] == 1) {
            $('#status').html("RUNNING")
            $('#status').css("color", "#5cb85c")
            $('#selectTask').prop('disabled', true)
            $('#webprogram-start').prop('disabled', true)
          } else {
            $('#status').html("STANDBY")
            $('#status').css("color", "#428bca")
            $('#selectTask').prop('disabled', false)
            $('#webprogram-start').prop('disabled', false)
          }

          if (data.status[0] == 1 && data.status[1] == 1) {
            $('#webmotion-join').prop('disabled', false)
          } else {
            $('#webmotion-join').prop('disabled', true)
          }

          // Show the messages

          if (data.message[0] == 1) {
            $('#message').html("Position not reachable")
            $('#message').css("color", "#d9534f")
          } else if (data.message[3] == 3) {
            $('#message').html("Z max limit STOP")
            $('#message').css("color", "#d9534f")
          } else if (data.message[3] == 6) {
            $('#message').html("Z min limit STOP")
            $('#message').css("color", "#d9534f")
          } else if (data.message[2] == 3) {
            $('#message').html("Y max limit STOP")
            $('#message').css("color", "#d9534f")
          } else if (data.message[2] == 6) {
            $('#message').html("Y min limit STOP")
            $('#message').css("color", "#d9534f")
          } else if (data.message[1] == 3) {
            $('#message').html("X max limit STOP")
            $('#message').css("color", "#d9534f")
          } else if (data.message[1] == 6) {
            $('#message').html("X min limit STOP")
            $('#message').css("color", "#d9534f")
          } else {
            $('#message').html("NO MESSAGE")
            $('#message').css("color", "#5cb85c")
          }

          // Show the robot controller's errors

          if (data.error[0] == 0) {
            $('#error').html("NO ERROR")
            $('#error').css("color", "#5cb85c")
          } else {
            $('#error').html(data.error[1])
            $('#error').css("color", "#d9534f")
          }

          // Show the current joint degree values
          
          for (i = 0; i <= 5; i++) {
            if (data.joint[i] == 100000) { 
              $('.j' + (i+1)).html('N/A')
              $('#j' + (i+1) + 'p').prop('disabled', true)
              $('#j' + (i+1) + 'm').prop('disabled', true)
            } else {
              $('.j' + (i+1)).html(Math.round(data.joint[i]) + '&#176;')
            }
          }

          // Show the current Cartesian values

          $('.wx').html(Math.round(data.pose[0]) + 'mm')
          $('.wy').html(Math.round(data.pose[1]) + 'mm')
          $('.wz').html(Math.round(data.pose[2]) + 'mm')
          $('.ww').html(Math.round(data.pose[3]) + '&#176;')
          $('.wp').html(Math.round(data.pose[4]) + '&#176;')
          $('.wr').html(Math.round(data.pose[5]) + '&#176;')

          // Show the current limit values

          if ( data.limit[0] >= 10000 || data.limit[0] <= -10000 ) {
            $('#xMax').html('max')
          } else {
            $('#xMax').html(data.limit[0]) + ' mm'
          }

          if ( data.limit[1] >= 10000 || data.limit[1] <= -10000 ) {
            $('#yMax').html('max')
          } else {
            $('#yMax').html(data.limit[1]) + ' mm'
          }

          if ( data.limit[2] >= 10000 || data.limit[2] <= -10000 ) {
            $('#zMax').html('max')
          } else {
            $('#zMax').html(data.limit[2]) + ' mm'
          }

          if ( data.limit[3] >= 10000 || data.limit[3] <= -10000 ) {
            $('#xMin').html('min')
          } else {
            $('#xMin').html(data.limit[3]) + ' mm'
          }

          if ( data.limit[4] >= 10000 || data.limit[4] <= -10000 ) {
            $('#yMin').html('min')
          } else {
            $('#yMin').html(data.limit[4]) + ' mm'
          }

          if ( data.limit[5] >= 10000 || data.limit[5] <= -10000 ) {
            $('#zMin').html('min')
          } else {
            $('#zMin').html(data.limit[5]) + ' mm'
          }

          // Set the current limit value in the new limit input box

          $('#xMaxCh').click(function() {
            $('.limitWarning').hide()
            if ( data.limit[0] >= 10000 || data.limit[0] <= -10000 ) {
              $("#xMaxNew").val('')
            } else {
              $("#xMaxNew").val(data.limit[0])
            }
          })

          $('#yMaxCh').click(function() {
            $('.limitWarning').hide()
            if ( data.limit[1] >= 10000 || data.limit[1] <= -10000 ) {
              $("#yMaxNew").val('')
            } else {
              $("#yMaxNew").val(data.limit[1])
            }
          })

          $('#zMaxCh').click(function() {
            $('.limitWarning').hide()
            if ( data.limit[2] >= 10000 || data.limit[2] <= -10000 ) {
              $("#zMaxNew").val('')
            } else {
              $("#zMaxNew").val(data.limit[2])
            }
          })

          $('#xMinCh').click(function() {
            $('.limitWarning').hide()
            if ( data.limit[3] >= 10000 || data.limit[3] <= -10000 ) {
              $("#xMinNew").val('')
            } else {
              $("#xMinNew").val(data.limit[3])
            }
          })

          $('#yMinCh').click(function() {
            $('.limitWarning').hide()
            if ( data.limit[4] >= 10000 || data.limit[4] <= -10000 ) {
              $("#yMinNew").val('')
            } else {
              $("#yMinNew").val(data.limit[4])
            }
          })

          $('#zMinCh').click(function() {
            $('.limitWarning').hide()
            if ( data.limit[5] >= 10000 || data.limit[5] <= -10000 ) {
              $("#zMinNew").val('')
            } else {
              $("#zMinNew").val(data.limit[5])
            }
          })

          setTimeout(getposj(), 333)
        })
      }

      // Start a program

      $('#webprogram-start').click(function() {
        var sendTask = $('#selectTask').find('option:selected').text();
        if ( sendTask.indexOf("WEBMOTION") >= 0 ) {
          $('#info-controller').show()
          $('#info-jog').hide()
          $('#info-cart').hide()
          $('#webprogram-run').hide()
          $('#webprogram-control').hide()
          $('#webmotion-menu').show()
          $('#webmotion-jog').show()
          $('#webmotion-control').show()
        }        
        console.log('Start ' + sendTask)
        $.ajax({
          type: 'GET',
          url: '/KAREL/webstart?gettask=' + sendTask,
          cache: false,
          success: function() {
            console.log('Send START ' + sendTask + ' is successful')
          }
        })
      })

      // Join the running webmotion session

      $('#webmotion-join').click(function() {
          $('#info-controller').show()
          $('#info-jog').hide()
          $('#info-cart').hide()
          $('#webprogram-run').hide()
          $('#webprogram-control').hide()
          $('#webmotion-menu').show()
          $('#webmotion-jog').show()
          $('#webmotion-control').show()
      })

      // Restart the webmotion

      $('#webmotion-restart').click(function() {  
        console.log('Start webmotion')
        $.ajax({
          type: 'GET',
          url: '/KAREL/webstart?gettask=WEBMOTION',
          cache: false,
          success: function() {
            console.log('Send RESTART webmotion is successful')
          }
        })
      })

      // Reset the controller

      $('.reset').click(function() {
        console.log('Reset the controller')
        $.ajax({
          type: 'GET',
          url: '/KAREL/webreset',
          cache: false,
          success: function() {
            console.log('Send RESET is successful')
          }
        })
      })

      // Abort any motion

      $('.abort').click(function() {
        console.log('ABORT motion')
        $('#info-controller').show()
        $('#info-jog').show()
        $('#info-cart').show()
        $('#webprogram-run').show()
        $('#webprogram-control').show()
        $('#webmotion-menu').hide()
        $('#webmotion-jog').hide()
        $('#webmotion-cart').hide()
        $('#webmotion-set').hide()
        $('#webmotion-control').hide()
        $.ajax({
          type: 'GET',
          url: '/KAREL/webabort',
          cache: false,
          success: function() {
            console.log('Send ABORT is successful')
          }
        })
      })

      // Keep the motion
      
      function webkeep() {
        console.log('KEEP motion')
        $.ajax({
          type: 'GET',
          url: '/KAREL/webkeep',
          cache: false,
          success: function() {
            console.log('Send KEEP is successful')
          }
        })  
      }

      // Stop the motion
      
      function webstop() {
        console.log('STOP(999) motion')
        $.ajax({
          type: 'GET',
          url: '/KAREL/webstop',
          cache: false,
          success: function() {
            console.log('Send STOP(999) is successful')
          }
        })
      }

      // clearInterval and clearTimeout

      function webclear() {
        if (refresh !== undefined) {
          clearInterval(refresh)
          console.log('refresh is cleared')
        } else {
          console.log('refresh is undefined')
        }
        if (enButVar !== undefined) {
          clearTimeout(enButVar)
          console.log('enButVar is cleared')
        } else {
          console.log('enBurVar is undefined')
        }      
      }

      // Enable buttons after a motion
      
      function enBut() {
        $(".btn").removeAttr('disabled')
      }
    
      // Jogging

      $('#j1m').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '2' 
        var coord1 = '-1'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#j1p').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '2' 
        var coord1 = '1'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#j2m').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '2' 
        var coord1 = '0'
        var coord2 = '-1'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j2p').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '2' 
        var coord1 = '0'
        var coord2 = '1'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j3m').on('mousedown touchstart', function() {
        webclear()      
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '2' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '-1'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j3p').on('mousedown touchstart', function() {
        webclear()      
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '2' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '1'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })  

      $('#j4m').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false) 
        var mtn_mod = '2' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '-1'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j4p').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '2' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '1'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j5m').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '2' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '-1'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j5p').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '2' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '1'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j6m').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)  
        var mtn_mod = '2' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '-1'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      $('#j6p').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false) 
        var mtn_mod = '2' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '1'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      }) 

      // Move to linear
      
      $('#wmx').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '5' 
        var coord1 = '-3'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wpx').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '5' 
        var coord1 = '3'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wmy').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '5' 
        var coord1 = '0'
        var coord2 = '-3'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wpy').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '5' 
        var coord1 = '0'
        var coord2 = '3'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wmz').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '5' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '-3'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wpz').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '5' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '3'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      // Rotate the TCP

      $('#wmw').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '6' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '-1'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wpw').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '6' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '1'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wmp').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '6' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '-1'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wpp').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '6' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '1'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wmr').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '6' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '-1'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      $('#wpr').on('mousedown touchstart', function() {
        webclear()
        $(".btn").not(this).prop('disabled', true)
        $(".abort").prop('disabled', false)
        var mtn_mod = '6' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '1'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
        refresh = setInterval(webkeep, setInt)  
      }).on('mouseup touchend', function() {
        webstop()
        clearInterval(refresh)
        enButVar = setTimeout(enBut, setTime)
      })

      //Move to predefined pose
      
      $('#pickup').click(function() {
        var mtn_mod = '1' 
        var coord1 = '-45'
        var coord2 = '45'
        var coord3 = '90'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
      })
	  
      $('#zero').click(function() {
        var mtn_mod = '1' 
        var coord1 = '0'
        var coord2 = '0'
        var coord3 = '0'
        var coord4 = '0'
        var coord5 = '0'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
      })

      $('#place').click(function() {
        var mtn_mod = '1' 
        var coord1 = '0'
        var coord2 = '45'
        var coord3 = '135'
        var coord4 = '0'
        var coord5 = '45'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
      })

      $('#coord').click(function() {
        var mtn_mod = '1' 
        var coord1 = '0'
        var coord2 = '30'
        var coord3 = '90'
        var coord4 = '0'
        var coord5 = '-90'
        var coord6 = '0'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
      })

      $('#show').click(function() {
        var mtn_mod = '1' 
        var coord1 = '90'
        var coord2 = '0'
        var coord3 = '90'
        var coord4 = '0'
        var coord5 = '-90'
        var coord6 = '-90'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
      })

      $('#touch').click(function() {
        var mtn_mod = '1' 
        var coord1 = '90'
        var coord2 = '60'
        var coord3 = '30'
        var coord4 = '0'
        var coord5 = '60'
        var coord6 = '-90'
        $.ajax({
          type: 'GET',
          url: `/KAREL/webcontrol?str_mtn_mod=${mtn_mod}&str_coord1=${coord1}&str_coord2=${coord2}&str_coord3=${coord3}&str_coord4=${coord4}&str_coord5=${coord5}&str_coord6=${coord6}`,
          cache: false,
          success: function() {}
        })
      })

      //Set limits
      
      $('#xMaxSave').click(function() {
        if ( $("#xMaxNew").val() > axisLimit || $("#xMaxNew").val() < -axisLimit) {
          $('.limitWarning').show()
        } else {
          $('.limitWarning').hide()
          $.ajax({
            type: 'GET',
            url: '/KAREL/weblimit?getlimit_id=1&getlimit_val=' + $("#xMaxNew").val(),
            cache: false,
            success: function() {
              $('#xMaxSet').modal('hide')
            }
          })
        }
      })

      $('#yMaxSave').click(function() {
        if ( $("#yMaxNew").val() > axisLimit || $("#yMaxNew").val() < -axisLimit) {
          $('.limitWarning').show()
        } else {
          $('.limitWarning').hide()
          $.ajax({
            type: 'GET',
            url: '/KAREL/weblimit?getlimit_id=2&getlimit_val=' + $("#yMaxNew").val(),
            cache: false,
            success: function() {
              $('#yMaxSet').modal('hide')
            }
          })
        }
      })

      $('#zMaxSave').click(function() {
        if ( $("#zMaxNew").val() > axisLimit || $("#zMaxNew").val() < -axisLimit) {
          $('.limitWarning').show()
        } else {
          $('.limitWarning').hide()
          $.ajax({
            type: 'GET',
            url: '/KAREL/weblimit?getlimit_id=3&getlimit_val=' + $("#zMaxNew").val(),
            cache: false,
            success: function() {
              $('#zMaxSet').modal('hide')
            }
          })
        }
      })

      $('#xMinSave').click(function() {
        if ( $("#xMinNew").val() > axisLimit || $("#xMinNew").val() < -axisLimit) {
          $('.limitWarning').show()
        } else {
          $('.limitWarning').hide()
          $.ajax({
            type: 'GET',
            url: '/KAREL/weblimit?getlimit_id=4&getlimit_val=' + $("#xMinNew").val(),
            cache: false,
            success: function() {
              $('#xMinSet').modal('hide')
            }
          })
        }
      })

      $('#yMinSave').click(function() {
        if ( $("#yMinNew").val() > axisLimit || $("#yMinNew").val() < -axisLimit) {
          $('.limitWarning').show()
        } else {
          $('.limitWarning').hide()
          $.ajax({
            type: 'GET',
            url: '/KAREL/weblimit?getlimit_id=5&getlimit_val=' + $("#yMinNew").val(),
            cache: false,
            success: function() {
              $('#yMinSet').modal('hide')
            }
          })
        }
      })

      $('#zMinSave').click(function() {
        if ( $("#yMinNew").val() > axisLimit || $("#yMinNew").val() < -axisLimit) {
          $('.limitWarning').show()
        } else {
          $('.limitWarning').hide()
          $.ajax({
            type: 'GET',
            url: '/KAREL/weblimit?getlimit_id=6&getlimit_val=' + $("#zMinNew").val(),
            cache: false,
            success: function() {
              $('#zMinSet').modal('hide')
            }
          })
        }
      })

    })

  </script>

</body>
</html>